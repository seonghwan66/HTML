create table product(
	number int not null primary key,
	id varchar(20) not null,
	product varchar(20) not null,
	quantity int not null,
	date datetime not null
);

insert into product values
	(1, '김성환', '애플', 5, now()),
	(2, '조준혁', '성환', 5, now()),
	(3, '김민서', '펩시', 3, now()),
	(4, '동아대', '부산', 2, now());
-------------------------------------------------
productList.html

<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
	<head><meta charset="UTF-8">
	<title>ProdUct</title></head>
	<style>
		body {background-color:skyblue;}
		table {width: 600px;}
		#td1 { color:blue; font-weight:bold;}
		#td2 {color:red; text-align:right;}
	</style>
	<body>
		<div align="center">
		<h3> Product</h3>
		<table border="1">
			<tr> <th>number <th>id <th>product <th>quantity <th>time</tr>
				<tr th:each="a:${arr}">
					<td th:text="${a.number}" id="td1">number
					<td th:text="${a.id}">id
					<td th:text="${a.product}">product
					<td th:text="${a.quantity}" id="td2">quantity
					<td th:text="${a.date}">date</tr>
		</table><br>
	</div></body>
</html>
-------------------------------------------------
product.java

package com.web.p5;

import java.time.LocalDateTime;
import org.hibernate.annotations.CreationTimestamp;
import jakarta.persistence.Entity;
import jakarta.persistence.Id;

@Entity
public class product {
	@Id
	public Integer number;
	public String id;
	public String product;
	public Integer quantity;
	
	@CreationTimestamp public LocalDateTime date;
}
-------------------------------------------------
productRep.java

package com.web.p5;

import org.springframework.data.jpa.repository.JpaRepository;
import org.springframework.stereotype.Repository;

@Repository
public interface productRep extends JpaRepository<product, Integer> {}
-------------------------------------------------
VanController1.java

package com.web.p5;

import java.util.List;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.GetMapping;

@Controller
public class VanController1 {
	@Autowired
	private productRep prep;
	
	@GetMapping("/product/list")
	public String productList(Model mo) {
	List<product> arr= prep.findAll();
	mo.addAttribute("arr",arr);
	return "productList";
	}
}
-------------------------------------------------


-----------------------------------------------------
survey.html

<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>설문 조사 시작</title>
    </head>
    <body style="background-color: #F1F8E0">
        <h1>설문 조사</h1>
        <form action="/player" method="post">
            아이디 : <input type="text" name="id"><p>
            <input type="submit" value="확인">
        </form><p>
    </body>
</html>
-----------------------------------------------------
player.html

<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head><meta charset="UTF-8">
    <title>Best Player Of the Year</title>
</head>
<body style="background-color:orange">
    <h1>22-23시즌 최고의 선수</h1>
    <form action="/team" method="post">
    <input type="radio" name="player" value="CR7">호날두<br>
    <input type="radio" name="player" value="Haaland">홀란드<br>
    <input type="radio" name="player" value="Messi">메시<br>
    <input type="radio" name="player" value="Son">손흥민<br><br>
    <input type="submit" value="선택">
    </form>
</body>
</html>
-----------------------------------------------------
team.html

<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head><meta charset="UTF-8">
    <title>Best Team Of the Year</title>
</head>
<body style="background-color:skyblue">
    <h1>23-24시즌 챔피언스리그 우승</h1>
    <form action="/thanks" method="post">
        <select name="team">
            <option>Bayern Munich</option>
            <option>Real Madrid</option>
            <option>Manchester City</option>
            <option>Liverpool</option>
        </select>
        <input type="submit" value="선택">
    </form>
</body>
</html>
-----------------------------------------------------
thanks.html

<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head><meta charset="UTF-8">
    <title>Thank You!</title>
</head>
	<style>
	    h1{background-color: pink; color:blue};
	    a{background-color: pink; color:blue;}
	</style>
	<body style="background-color:#F781F3">
 	   <h2>설문에 응해주셔서 감사합니다!</h2>
    	<a href="/result">결과 보기</a>
	</body>
</html>
-----------------------------------------------------
result.html

<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head><meta charset="UTF-8">
    <title>설문 결과</title>
</head>
<style>
    #id {color: blue}
</style>
<body style="background-color:#00FFBF">
    <strong id="id" th:text="${id}">id</strong>님은<br>
    <strong th:text="${player}">Salah</strong> 선수와<br>
    <strong th:text="${team}">Liverpool FC</strong>을 선택하셨습니다!<br>
</body>
</html>
-----------------------------------------------------
SurveyController.html

package com.web.p5;

import org.springframework.stereotype.Controller;
import org.springframework.ui.Model;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PostMapping;
import jakarta.servlet.http.HttpSession;

@Controller
public class SurveyController {

    @GetMapping("/survey")
    public String survey() {
        return "survey";
    }

    @PostMapping("/player")
    public String player(HttpSession se, String id) {
        se.setAttribute("id", id);
        return "player";
    }

    @PostMapping("/team")
    public String team(HttpSession se, String player) {
        se.setAttribute("player", player);
        return "team";
    }
    @PostMapping("/thanks")
    public String thanks(HttpSession se, String team) {
    	se.setAttribute("team", team);
        return "thanks";
    }
    @GetMapping("/result")
    public String result(HttpSession se, String id, String player, String team, Model mo) {
    	
    	mo.addAttribute("id", se.getAttribute("id"));
    	mo.addAttribute("player", se.getAttribute("player"));
    	mo.addAttribute("team", se.getAttribute("team"));

        return "result";
    }
}
